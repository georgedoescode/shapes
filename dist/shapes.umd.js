!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("geometric"),require("offset-polygon"),require("adaptive-quadratic-curve"),require("adaptive-bezier-curve"),require("polygon-clipping"),require("simplepolygon"),require("simplify-path"),require("distance-to-polygon")):"function"==typeof define&&define.amd?define(["exports","geometric","offset-polygon","adaptive-quadratic-curve","adaptive-bezier-curve","polygon-clipping","simplepolygon","simplify-path","distance-to-polygon"],n):n((t||self).shapes={},t.geometric,t.offsetPolygon,t.adaptiveQuadraticCurve,t.adaptiveBezierCurve,t.polygonClipping,t.simplepolygon,t.simplifyPath,t.distanceToPolygon)}(this,function(t,n,e,r,i,o,u,a,c){function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=/*#__PURE__*/l(e),s=/*#__PURE__*/l(r),h=/*#__PURE__*/l(i),v=/*#__PURE__*/l(o),p=/*#__PURE__*/l(u),y=/*#__PURE__*/l(a);function g(t,n){var e=t[0]-n[0],r=t[1]-n[1];return Math.sqrt(e*e+r*r)}function d(t,n){for(var e=[t[0]],r=function(r){var i=t[r];e.some(function(t){return g(t,i)<=n})||e.push(i)},i=1;i<t.length;i++)r(i);return e}function x(t,n){if(0===t.length)return[];var e=[];if(isNaN(t[0][0][0])||isNaN(t[0][0][1]))for(var r=0;r<t.length;r++){var i=t[r];if(1===i.length)n?n(i[0]):e.push(i[0]);else for(var o=0;o<i.length;o++)n?n(i[o]):e.push(i[o])}else n?n(t[0]):e.push(t[0]);return e}function m(t){return JSON.parse(JSON.stringify(t))}function b(t){var e=x(t).flat(),r=n.polygonBounds(e),i=r[0],o=r[1];return{x:i[0],y:i[1],width:o[0]-i[0],height:o[1]-i[1]}}var w=function(){function t(t,n,e){var r=n.x-t.x,i=n.y-t.y,o=e/(2*Math.sqrt(r*r+i*i));return{x:-o*i,y:o*r}}function n(t,n,e,r){var i=(n.y-t.y)/(n.x-t.x),o=(r.y-e.y)/(r.x-e.x);if(!(i===o||Math.abs(i-o)<1e-5)){var u=t.y-i*t.x,a=(u-(e.y-o*e.x))/(o-i);return{x:a,y:i*a+u}}}return function(e,r){for(var i=[],o=0;o<e.length;o++)i.push({x:(w=e[o])[0],y:w[1]});if(e=i,"[object Array]"!==Object.prototype.toString.call(r)){var u=r;for(r=[],o=0;o<e.length;o++)r.push(u)}for(var a,c,l,f,s,h,v,p,y,g,d,x,m=[],b=(o=0,e.length-1);o<b;o++)l=!o,f=o===e.length-2,a=t(e[o],e[o+1],r[o]),c=t(e[o],e[o+1],r[o+1]),y={x:e[o].x+a.x,y:e[o].y+a.y},g={x:e[o+1].x+c.x,y:e[o+1].y+c.y},d={x:e[o].x-a.x,y:e[o].y-a.y},x={x:e[o+1].x-c.x,y:e[o+1].y-c.y},l||((v=n(s[0],s[1],y,g))&&m.unshift(v),(p=n(h[0],h[1],d,x))&&m.push(p)),l&&(m.unshift(y),m.push(d)),f&&(m.unshift(g),m.push(x)),f||(s=[y,g],h=[d,x]);for(o=0;o<m.length;o++){var w;m[o]=[(w=m[o]).x,w.y]}return m.push(m[0]),m.filter(function(t){return!isNaN(t[0])&&!isNaN(t[1])})}}();function N(t,n){return w(t,n)}function M(t,n,e){void 0===e&&(e=64);for(var r=[],i=2*Math.PI/e,o=1;o<=e;o++)r.push([Math.cos(o*i)*t/2+t/2,Math.sin(o*i)*n/2+n/2]);return r.push(r[0]),[r]}function q(t,e,r){var i=b(t);null===e&&(e=i.x),null===r&&(r=i.y);var o,u,a=[i.x,i.y],c=[e,r],l=g(a,c),f=(o=a,u=c,180*Math.atan2(u[1]-o[1],u[0]-o[0])/Math.PI);return x(t,function(t){for(var e=n.polygonTranslate(t,f,l),r=0;r<e.length;r++)t[r]=e[r]}),t}function A(t,n,e){var r=b(t),i=[null===n?r.x:n-r.width/2,null===e?r.y:e-r.height/2];return q(t,i[0],i[1])}function S(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function P(t){for(var n,e="",r=function(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return S(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?S(t,n):void 0}}(t))){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(x(t.vertices));!(n=r()).done;){var i=n.value,o="";o+="M "+i[0][0].toFixed(2)+" "+i[0][1].toFixed(2);for(var u=1;u<i.length;u++)o+="L "+i[u][0].toFixed(2)+" "+i[u][1].toFixed(2);e+=o+="Z"}return e}function O(){var t=[].slice.call(arguments).map(function(t){return t.vertices});return I(v.default.intersection.apply(v.default,t))}var j=/*#__PURE__*/function(){function t(t){this.vertices=t}var e=t.prototype;return e.x=function(t){return this.vertices=q(m(this.vertices),t,null),this},e.y=function(t){return this.vertices=q(m(this.vertices),null,t),this},e.cx=function(t){return this.vertices=A(m(this.vertices),t,null),this},e.cy=function(t){return this.vertices=A(m(this.vertices),null,t),this},e.rotate=function(t){return void 0===t&&(t=0),this.vertices=function(t,e){var r=b(t);return x(t,function(t){for(var i=n.polygonRotate(t,e,[r.x+r.width/2,r.y+r.height/2]),o=0;o<i.length;o++)t[o]=i[o]}),t}(m(this.vertices),t),this},e.scale=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=null),null===e&&(e=t),this.vertices=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=1);var i=b(t);return x(t,function(t){for(var o=n.polygonScaleX(t,e,[i.x+i.width/2,i.y+i.height/2]),u=n.polygonScaleY(o,r,[i.x+i.width/2,i.y+i.height/2]),a=0;a<u.length;a++)t[a]=u[a]}),t}(m(this.vertices),t,e),this},e.offset=function(t){return t>=1&&(this.vertices=function(t,e){void 0===e&&(e=1);var r=null;if(isNaN(t[0][0][0])||isNaN(t[0][0][1])?1===t.length&&1===t[0].length&&(r=t[0][0]):r=t[0],r){var i=function(t,n){var e=t.map(function(t){return{x:t[0],y:t[1]}}),r=!1;JSON.stringify(e[0])===JSON.stringify(e[e.length-1])&&(e=e.slice(0,e.length-1),r=!0);var i=f.default(e,n,0);return r&&i.push(i[0]),i.map(function(t){return[t.x,t.y]})}(r,-e),o=p.default({type:"Feature",geometry:{type:"Polygon",coordinates:[d(i.filter(function(t){return"number"==typeof t[0]&&"number"==typeof t[0]}),0)]}}).features.map(function(t){return t.geometry.coordinates[0]}).sort(function(t,e){return n.polygonArea(e)-n.polygonArea(t)})[0].filter(function(t){return c.distanceToPolygon(t,r)>=e-1});return v.default.difference(t,[o])}return console.warn("Only simple polygons can have a stroke applied."),t}(m(this.vertices),t)),this},e.radius=function(t){return t>=0&&(this.vertices=function(t,n){return x(t,function(t){for(var e=function(t,n){0===n&&(n=1e-7),(t=t.map(function(t){return{x:t[0],y:t[1]}}))[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&(t=t.slice(0,t.length-1));for(var e=[],r=function(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},i=function(t,n,e){return t+(n-t)*e},o=function(t,n,e){return{x:i(t.x,n.x,e),y:i(t.y,n.y,e)}},u=t.length,a=[],c=0;c<u;c++){var l=t[c],f=t[(c+1)%u],h=t[(c+2)%u],v=r(l,f),p=o(f,l,Math.min(v/2,n)/v),y=r(h,f),g=o(f,h,Math.min(y/2,n)/y);a.push([p,f,g])}for(var d=0,x=a;d<x.length;d++){var m=x[d],b=m[0],w=m[1],N=m[2];e.push.apply(e,s.default([b.x,b.y],[w.x,w.y],[N.x,N.y],8))}return e}(m(t),n),r=0;r<e.length;r++)t[r]=e[r]}),t}(m(this.vertices),t)),this},e.spline=function(t){return t>0&&(this.vertices=function(t,n){return x(t,function(t){for(var e=function(t,n,e){void 0===t&&(t=[]),void 0===n&&(n=1),void 0===e&&(e=!0),t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1)),t=function(t,n){if(t=[].concat(t),Array.isArray(t[0])||(t=t.map(function(t){return[t.x,t.y]})),n){var e=t[t.length-2],r=t[0],i=t[1];t.unshift(t[t.length-1]),t.unshift(e),t.push(r),t.push(i)}return t.flat()}(t,e);var r=[],i=t.length,o=i-4;r.push([e?t[2]:t[0],e?t[3]:t[1]]);for(var u=e?i-4:i-2,a=n,c=e?2:0;c<u;c+=2){var l=c?t[c-2]:t[0],f=c?t[c-1]:t[1],s=t[c+0],v=t[c+1],p=t[c+2],y=t[c+3];n=g([s,v],[p,y])<8?1e-4:a,r.push.apply(r,h.default([s,v],[s+(p-l)/6*n,v+(y-f)/6*n],[p-((c!==o?t[c+4]:p)-s)/6*n,y-((c!==o?t[c+5]:y)-v)/6*n],[p,y],8))}return d(r,0)}(m(t),n,!0),r=0;r<e.length;r++)t[r]=e[r]}),t}(m(this.vertices),t)),this},e.simplify=function(t){return void 0===t&&(t=16),this.vertices=function(t,e){return x(t,function(t){var r,i,o=y.default(m(t),e),u=function(t){var e=x(t).flat();return n.polygonCentroid(e)}([t]);t.splice(o.length,t.length-o.length);for(var a=0;a<o.length;a++)t[a]=[(r=o[a])[0]+=0*((i=u)[0]-r[0]),r[1]+=0*(i[1]-r[1])];t[t.length-1]=t[0]}),t}(m(this.vertices),t),this},e.checkIntersection=function(t,n){var e=this;void 0===n&&(n=1);try{return!!(t.some(function(t){return!!O(t.clone(),e.clone()).vertices[0]})||t.some(function(t){return!!O(t.clone(),e.clone().scale(1*n)).vertices[0]})||t.some(function(t){return!!O(t.clone(),e.clone().scale(1/n)).vertices[0]}))}catch(t){return!0}},e.getBounds=function(){return b(this.vertices)},e.getArea=function(){return function(t){var e=x(t).flat();return n.polygonArea(e)}(this.vertices)},e.clone=function(){return new t(m(this.vertices))},e.buildPath=function(){return P(this.clone())},t}();function I(t){return new j(t)}t.buildPath=P,t.circle=function(t,n){var e=M(t,t,n);return new j(e)},t.difference=function(){var t=[].slice.call(arguments).map(function(t){return t.vertices});return I(v.default.difference.apply(v.default,t))},t.ellipse=function(t,n,e){var r=M(t,n,e);return new j(r)},t.intersection=O,t.line=function(t,n){var e=function(t,n){return void 0===n&&(n=1),[N(t,n)]}(t,n);return new j(e)},t.polygon=I,t.quadtratic=function(t,n,e,r,i){var o=function(t,n,e,r,i){return void 0===r&&(r=1),void 0===i&&(i=8),[N(s.default(t,n,e,i),r)]}(t,n,e,r,i);return new j(o)},t.rect=function(t,n){var e=function(t,n){return[[[0,0],[t,0],[t,n],[0,n],[0,0]]]}(t,n);return new j(e)},t.union=function(){var t=[].slice.call(arguments).map(function(t){return t.vertices});return I(v.default.union.apply(v.default,t))},t.xor=function(){var t=[].slice.call(arguments).map(function(t){return t.vertices});return I(v.default.xor.apply(v.default,t))}});
//# sourceMappingURL=shapes.umd.js.map
